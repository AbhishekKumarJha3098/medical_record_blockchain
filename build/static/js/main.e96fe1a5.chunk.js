(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{350:function(e,t,n){"use strict";(function(e){var a=n(2),s=n.n(a),r=n(61),c=n(25),i=n(0),o=n(351),l=n(47),u=n(164),d=n(859),p=n(65),j=(n(303),n(1)),b=Object(o.create)("https://ipfs.infura.io:5001/api/v0");t.a=function(t){var n=Object(i.useState)({buffer:null,memeHash:"Qmc9TdNL5kDbKpv2XAPWtQPiqUj7bEi9Be8Tthh8ZnShD1"}),a=Object(c.a)(n,2),o=a[0],h=a[1],m=Object(i.useState)(""),f=Object(c.a)(m,2),x=f[0],O=f[1],y=function(){var e=Object(r.a)(s.a.mark((function e(n){var a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),console.log("Submitting the form..."),p.b.info("Taking you to the wallet",{position:"top-right",autoClose:5e3}),e.next=5,b.add(o.buffer);case 5:return a=e.sent,console.log(a.path),e.next=9,window.ethereum.request({method:"eth_accounts"});case 9:return r=e.sent,e.prev=10,p.b.info("Initiating transaction. Wait for wallet to confirm transaction",{position:"top-right",autoClose:1e4}),e.next=14,l.a.methods.upDoc(t.pAdd,a.path,x).send({from:r[0]});case 14:O(""),p.b.success("Success! You file has been added to IPFS",{position:"top-right",autoClose:5e3}),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(10),console.log(e.t0),s=e.t0.message,p.b.error(s,{position:"top-right",autoClose:5e3});case 22:case"end":return e.stop()}var s}),e,null,[[10,18]])})));return function(t){return e.apply(this,arguments)}}();return t.admin?Object(j.jsxs)("div",{children:[Object(j.jsx)("h4",{children:" Upload the records"}),Object(j.jsx)(u.a,{onSubmit:y,children:Object(j.jsxs)(u.a.Group,{controlId:"formFile",className:"mb-3",children:[Object(j.jsx)(u.a.Control,{type:"text",placeholder:"Enter file name",name:"filename",value:x,onChange:function(e){e.preventDefault();var t=e.target,n=t.name,a=t.value;console.log(n),O(a)}}),Object(j.jsx)(u.a.Control,{style:{marginTop:10,marginBottom:10},type:"file",onChange:function(t){t.preventDefault();var n=t.target.files[0],a=new window.FileReader;a.readAsArrayBuffer(n),a.onloadend=function(){console.log("buffer",e(a.result)),h({buffer:e(a.result)})}}}),Object(j.jsx)(d.a,{variant:"danger",type:"submit",children:"Submit"})]})}),Object(j.jsx)(p.a,{})]}):Object(j.jsx)("div",{})}}).call(this,n(10).Buffer)},372:function(e,t){},380:function(e,t){},398:function(e,t){},400:function(e,t){},417:function(e,t){},418:function(e,t){},47:function(e,t,n){"use strict";var a,s=n(163),r=n.n(s);if("undefined"!==typeof window&&"undefined"!==window.web3)a=new r.a(window.web3.currentProvider);else{var c=new r.a.providers.HttpProvider("https://rinkeby.infura.io/v3/0087327b8d6e452a890953f7ce0986b4");a=new r.a(c)}var i=new a.eth.Contract([{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"admin",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"add",type:"address"}],name:"checkAdmin",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"add",type:"address"}],name:"checkPatient",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"add",type:"address"}],name:"getHosDetails",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"add",type:"address"}],name:"getPatientDetails",outputs:[{internalType:"string",name:"",type:"string"},{internalType:"string",name:"",type:"string"},{internalType:"string",name:"",type:"string"},{internalType:"string",name:"",type:"string"},{internalType:"string[]",name:"",type:"string[]"},{internalType:"string[]",name:"",type:"string[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getPatients",outputs:[{internalType:"address[]",name:"",type:"address[]"},{internalType:"string[]",name:"",type:"string[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"hosAdmin",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"hospitals",outputs:[{internalType:"string",name:"name",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"n",type:"string"},{internalType:"address",name:"u",type:"address"}],name:"newHospital",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"n",type:"string"},{internalType:"string",name:"a",type:"string"},{internalType:"string",name:"d",type:"string"},{internalType:"string",name:"s",type:"string"}],name:"newPatient",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"patientexist",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"patients",outputs:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"aadhar",type:"string"},{internalType:"string",name:"dob",type:"string"},{internalType:"string",name:"sex",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"pAdd",type:"address"},{internalType:"string",name:"hash",type:"string"},{internalType:"string",name:"docD",type:"string"}],name:"upDoc",outputs:[],stateMutability:"nonpayable",type:"function"}],"0xF92149e40E29c49391390A25eB5f6E77928ffc06");t.a=i},480:function(e,t){},482:function(e,t){},515:function(e,t){},517:function(e,t){},518:function(e,t){},523:function(e,t){},525:function(e,t){},531:function(e,t){},533:function(e,t){},546:function(e,t){},558:function(e,t){},561:function(e,t){},566:function(e,t){},577:function(e,t){},586:function(e,t){},588:function(e,t){},645:function(e,t,n){},692:function(e,t){},854:function(e,t){},856:function(e,t,n){},857:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n(59),r=n.n(s),c=(n(359),n(126)),i=n(35),o=n(2),l=n.n(o),u=n(61),d=n(25),p=n(863),j=n(348),b=n(859),h=n(47),m=n(31),f=n(3),x=n(866),O=n(164),y=n(65),g=(n(303),n(1)),v=function(){var e=Object(a.useState)(!1),t=Object(d.a)(e,2),n=t[0],s=t[1],r=function(){return s(!1)},c=Object(a.useState)({name:"",dob:"",sex:"",aadhar:""}),i=Object(d.a)(c,2),o=i[0],p=i[1],j=function(e){e.preventDefault();var t=e.target,n=t.name,a=t.value;p((function(e){return Object(f.a)(Object(f.a)({},e),{},Object(m.a)({},n,a))}))},v=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(o),e.next=3,window.ethereum.request({method:"eth_accounts"});case 3:return t=e.sent,e.prev=4,y.b.info("Initiating transaction. Wait for wallet to confirm transaction",{position:"top-right",autoClose:5e3}),e.next=8,h.a.methods.newPatient(o.name,o.aadhar,o.dob,o.sex).send({from:t[0]});case 8:y.b.success("Success! You can now login",{position:"top-right",autoClose:5e3}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),console.log(e.t0),y.b.error("Oops! An error occurred. Please try again!",{position:"top-right",autoClose:5e3});case 15:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(){return e.apply(this,arguments)}}();return Object(g.jsxs)("div",{children:[Object(g.jsx)(b.a,{onClick:function(){return s(!0)},variant:"light",size:"lg",className:"sign-in-button",children:"Register"}),Object(g.jsxs)(x.a,{show:n,onHide:r,children:[Object(g.jsx)(x.a.Header,{closeButton:!0,children:Object(g.jsx)(x.a.Title,{children:"Register yourself"})}),Object(g.jsx)(x.a.Body,{children:Object(g.jsxs)(O.a,{children:[Object(g.jsxs)(O.a.Group,{className:"mb-3",children:[Object(g.jsx)(O.a.Label,{children:"Name"}),Object(g.jsx)(O.a.Control,{name:"name",value:o.name,onChange:j,type:"text",placeholder:"Enter name"})]}),Object(g.jsxs)(O.a.Group,{className:"mb-3",children:[Object(g.jsx)(O.a.Label,{children:"DOB"}),Object(g.jsx)(O.a.Control,{name:"dob",value:o.dob,onChange:j,type:"date",placeholder:"Enter DOB"})]}),Object(g.jsxs)(O.a.Group,{className:"mb-3",children:[Object(g.jsx)(O.a.Label,{children:"SEX"}),Object(g.jsxs)(O.a.Select,{name:"sex",value:o.sex,onChange:j,"aria-label":"Default select example",children:[Object(g.jsx)("option",{children:"Select your Gender"}),Object(g.jsx)("option",{value:"Male",children:"Male"}),Object(g.jsx)("option",{value:"Female",children:"Female"}),Object(g.jsx)("option",{value:"Other",children:"Other"})]})]}),Object(g.jsxs)(O.a.Group,{className:"mb-3",children:[Object(g.jsx)(O.a.Label,{children:"Aadhar"}),Object(g.jsx)(O.a.Control,{name:"aadhar",value:o.aadhar,onChange:j,type:"number",placeholder:"Enter Aadhar Number"})]}),Object(g.jsx)(b.a,{variant:"outline-danger",onClick:v,children:"Submit"})]})}),Object(g.jsx)(x.a.Footer,{children:Object(g.jsx)(b.a,{variant:"danger",onClick:r,children:"Close"})})]}),Object(g.jsx)(y.a,{})]})},w=function(){var e=Object(a.useState)(""),t=Object(d.a)(e,2),n=t[0],s=t[1],r=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.ethereum.request({method:"eth_requestAccounts"});case 3:t=e.sent,console.log(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:return e.next=12,h.a.methods.checkAdmin(t[0]).call();case 12:return n=e.sent,e.next=15,h.a.methods.checkPatient(t[0]).call();case 15:a=e.sent,console.log(n),n?(console.log("Admin"),s("/hospital/".concat(t[0]))):(console.log("yha pe log kr rha hu"),a?(console.log("patient"),s("/patient/".concat(t[0])),console.log("nhi ho rha")):(console.log("Go register idiot"),alert("Your are not registered. Please register first"),console.log("yha pe")));case 18:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(g.jsx)("div",{children:Object(g.jsx)("section",{className:"hero",children:Object(g.jsxs)("div",{className:"hero-content",children:[Object(g.jsx)("h1",{className:"hero-title",children:"Health Records"}),Object(g.jsx)("h2",{className:"hero-subtitle",children:"All your health records in one place. Safe and Secure!"}),Object(g.jsx)(i.a,{to:n}),Object(g.jsx)("div",{className:"buttons",children:Object(g.jsxs)(p.a,{children:[Object(g.jsx)(j.a,{lg:4}),Object(g.jsx)(j.a,{lg:2,children:Object(g.jsx)(b.a,{onClick:r,variant:"danger",size:"lg",className:"sign-in-button",children:"Sign In"})}),Object(g.jsx)(j.a,{lg:2,children:Object(g.jsx)(v,{})})]})})]})})})},T=function(){return Object(g.jsx)("div",{children:Object(g.jsx)(w,{})})},N=n(864),k=n(865),C=(n(645),function(e){return Object(g.jsx)("div",{children:Object(g.jsx)(k.a,{className:"topnav",children:Object(g.jsxs)(N.a,{children:[Object(g.jsx)(k.a.Brand,{as:"h1",className:"navbar-brand ml-5",children:e.name}),Object(g.jsx)(k.a.Toggle,{}),Object(g.jsx)(k.a.Collapse,{className:"justify-content-end"})]})})})}),S=n(350),D=(n(856),function(e){var t=e.match,n=Object(a.useState)({address:"",name:"",aadhar:"",dob:"",sex:"",docs:[],docsD:[]}),s=Object(d.a)(n,2),r=s[0],c=s[1],i=function(){var e=Object(u.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.methods.getPatientDetails(t.params.id).call();case 2:n=e.sent,c({address:t.params.id,name:n[0],aadhar:n[1],dob:n[2],sex:n[3],docs:n[4],docsD:n[5]});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();i();var o=Object(a.useState)(!1),b=Object(d.a)(o,2),m=b[0],f=b[1],x=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.ethereum.request({method:"eth_accounts"});case 3:t=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:return e.next=11,h.a.methods.checkAdmin(t[0]).call();case 11:n=e.sent,f(n);case 13:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return x(),Object(g.jsxs)("div",{className:"patientPage",children:[Object(g.jsx)(C,{name:r.name}),Object(g.jsx)("section",{className:"mt-1",children:Object(g.jsxs)(N.a,{children:[Object(g.jsx)("h4",{children:"Patient details"}),Object(g.jsxs)(p.a,{className:"table-row",children:[Object(g.jsxs)(j.a,{className:"table-col",children:[Object(g.jsxs)(p.a,{className:"table-row1",children:[Object(g.jsx)(j.a,{lg:4,children:"Name"}),Object(g.jsx)(j.a,{lg:4,children:r.name})]}),Object(g.jsxs)(p.a,{className:"table-row2",children:[Object(g.jsx)(j.a,{lg:4,children:"DATE OF BIRTH"}),Object(g.jsx)(j.a,{lg:4,children:r.dob})]}),Object(g.jsxs)(p.a,{className:"table-row1",children:[Object(g.jsx)(j.a,{lg:4,children:"SEX"}),Object(g.jsx)(j.a,{lg:4,children:r.sex})]}),Object(g.jsxs)(p.a,{className:"table-row2",children:[Object(g.jsx)(j.a,{lg:4,children:"aadhar"}),Object(g.jsx)(j.a,{lg:4,children:r.aadhar})]}),Object(g.jsxs)(p.a,{className:"table-row1",children:[Object(g.jsx)(j.a,{lg:4,children:"Address"}),Object(g.jsx)(j.a,{lg:4,children:r.address})]})]}),Object(g.jsx)(j.a,{className:"upload",children:Object(g.jsx)(S.a,{admin:m,pAdd:t.params.id})})]}),Object(g.jsx)(p.a,{className:"mt-5",children:Object(g.jsxs)(N.a,{children:[Object(g.jsxs)("h4",{children:[r.name,"'s Documents \ud83d\udcc3"]}),Object(g.jsxs)(p.a,{children:[Object(g.jsx)(j.a,{className:"table-row3",lg:3,children:r.docsD.map((function(e,t){return Object(g.jsx)("div",{className:"table-row4",children:e},t)}))}),Object(g.jsx)(j.a,{className:"table-row3",lg:3,children:r.docs.map((function(e,t){return Object(g.jsx)("a",{href:"https://ipfs.infura.io/ipfs/".concat(e),target:"_blank",rel:"noopener noreferrer",children:Object(g.jsx)("div",{className:"table-row4",children:e},t)})}))})]})]})})]})})]})}),A=n(867),P=function(e){var t=e.match,n=Object(a.useState)({address:"",name:""}),s=Object(d.a)(n,2),r=s[0],i=s[1],o=Object(a.useState)({list:[],names:[]}),p=Object(d.a)(o,2),j=p[0],b=p[1],m=function(){var e=Object(u.a)(l.a.mark((function e(){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.methods.getHosDetails(t.params.id).call();case 2:return n=e.sent,i({address:t.params.id,name:n}),e.next=6,h.a.methods.getPatients().call();case 6:a=e.sent,b({list:a[0],names:a[1]});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return m(),Object(g.jsxs)("div",{className:"hospitalPage",children:[Object(g.jsx)(C,{name:r.name}),Object(g.jsxs)(N.a,{children:[Object(g.jsx)("h5",{children:"Patient List: "}),Object(g.jsx)(A.a,{as:"ol",numbered:!0,children:j.list.map((function(e){return Object(g.jsx)(c.b,{to:"/patient/".concat(e),children:Object(g.jsx)(A.a.Item,{className:"table-row5",as:"li",children:e},e)})}))})]})]})};var M=function(){return Object(g.jsxs)(c.a,{children:[Object(g.jsx)(i.b,{exact:!0,path:"/",component:T}),Object(g.jsx)(i.b,{path:"/patient/:id",component:D}),Object(g.jsx)(i.b,{path:"/hospital/:id",component:P}),Object(g.jsx)(i.b,{path:"/register",component:v})]})};r.a.render(Object(g.jsx)(M,{}),document.getElementById("root"))}},[[857,1,2]]]);
//# sourceMappingURL=main.e96fe1a5.chunk.js.map